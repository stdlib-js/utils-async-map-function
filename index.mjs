// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";function l(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var f=o,m=s,c=u.isPrimitive,d=a.isPrimitive,p=r;var h=function(e,t){return f(t)?(m(t,"thisArg")&&(e.thisArg=t.thisArg),m(t,"series")&&(e.series=t.series,!c(e.series))?new TypeError(p("invalid option. `%s` option must be a boolean. Option: `%s`.","series",e.series)):m(t,"limit")&&(e.limit=t.limit,!d(e.limit))?new TypeError(p("invalid option. `%s` option must be a positive integer. Option: `%s`.","limit",e.limit)):null):new TypeError(p("invalid argument. Options argument must be an object. Value: `%s`.",t))},v="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function g(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}var b=g,j=w;function y(e){if(b===setTimeout)return setTimeout(e,0);if((b===g||!b)&&setTimeout)return b=setTimeout,setTimeout(e,0);try{return b(e,0)}catch(t){try{return b.call(null,e,0)}catch(t){return b.call(this,e,0)}}}"function"==typeof v.setTimeout&&(b=setTimeout),"function"==typeof v.clearTimeout&&(j=clearTimeout);var T,x=[],E=!1,O=-1;function _(){E&&T&&(E=!1,T.length?x=T.concat(x):O=-1,x.length&&A())}function A(){if(!E){var e=y(_);E=!0;for(var t=x.length;t;){for(T=x,x=[];++O<t;)T&&T[O].run();O=-1,t=x.length}T=null,E=!1,function(e){if(j===clearTimeout)return clearTimeout(e);if((j===w||!j)&&clearTimeout)return j=clearTimeout,clearTimeout(e);try{j(e)}catch(t){try{return j.call(null,e)}catch(t){return j.call(this,e)}}}(e)}}function k(e,t){this.fun=e,this.array=t}k.prototype.run=function(){this.fun.apply(null,this.array)};function N(){}var P=N,L=N,D=N,M=N,V=N,q=N,z=N;var C=v.performance||{},F=C.now||C.mozNow||C.msNow||C.oNow||C.webkitNow||function(){return(new Date).getTime()};var I=new Date;var B={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];x.push(new k(e,t)),1!==x.length||E||y(A)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:P,addListener:L,once:D,off:M,removeListener:V,removeAllListeners:q,emit:z,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*F.call(C),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-I)/1e3}};module.exports=void 0!==B&&"renderer"===B.type?require("./browser.js"):require("./node.js");var G=l(Object.freeze({__proto__:null}))("map-function-async:limit");var H=function(e,t,n,r){var i,o,s,u,a,l,f;if(G("Number of invocations: %d",e),s=new Array(e),0===e)return G("Finished invoking a function."),r(null,s);for(u=e<t.limit?e:t.limit,G("Concurrency limit: %d",u),i=0,a=-1,l=e-1,f=0;f<u;f++)a<l&&m();function m(){var e;G("Invocation number: %d",e=a+=1),n.call(t.thisArg,e,(function(t,n){if(o)return;if(t)return o=!0,c(t);s[e]=n,c()}))}function c(t){return t?(G("Encountered an error: %s",t.message),r(t)):(G("Completed invocation %d of %d.",i+=1,e),a<l?m():i===e?(G("Finished invoking a function."),r(null,s)):void 0)}},J=t,K=n.isPrimitive,Q=r,R=i,S=h,U=H;var W=function(e,t){var n,r,i;if(n={},arguments.length>1){if(r=S(n,e))throw r;i=t}else i=e;if(!J(i))throw new TypeError(Q("invalid argument. Last argument must be a function. Value: `%s`.",i));return n.series?n.limit=1:n.limit||(n.limit=R),o;function o(e,t){if(!K(e))throw new TypeError(Q("invalid argument. Number of function invocations must be a nonnegative integer. Value: `%s`.",e));if(!J(t))throw new TypeError(Q("invalid argument. Last argument must be a function. Value: `%s`.",t));return U(e,n,i,(function(e,n){if(e)return t(e);t(null,n)}))}},X=W;var Y=function(e,t,n,r){if(arguments.length<4)return X(e)(t,n);X(n,e)(t,r)},Z=W;e(Y,"factory",Z);var $=Y;export{$ as default,Z as factory};
//# sourceMappingURL=index.mjs.map
